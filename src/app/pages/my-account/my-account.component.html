<app-nav-bar></app-nav-bar>
<div class="my-account-wrapper">
  <div class="account-container">
    <div class="bg-elements"></div>
    <div class="account-content">
      <div class="account-card" mat-elevation-z4 *ngIf="user$ | async as user">
        <div class="user">
          <img src="./../../../assets/images/escudo-cap.png" alt="" />
          <div class="user-info">
            <div class="user-name">
              <h1 class="name">{{ user.username }}</h1>
              <div class="stars">
                <mat-icon class="star">star</mat-icon>
                <mat-icon class="star">star</mat-icon>
                <mat-icon class="star">star</mat-icon>
                <mat-icon class="star">star</mat-icon>
                <mat-icon class="star">star</mat-icon>
              </div>
            </div>
            <div class="user-level">
              <h2 class="level-title">Nivel 5</h2>
              <div class="level-bar">
                <mat-progress-bar
                  mode="determinate"
                  value="40"
                  color="accent"
                ></mat-progress-bar>
              </div>
            </div>
            <div class="user-states">
              <div class="state state--status" mat-elevation-z4>
                {{ user.status }}
              </div>
              <div class="state state--admin" *ngIf="user.status === 'active'">
                Informaci√≥n validada
              </div>
            </div>
          </div>
        </div>
        <div class="description">
          <h3 class="description-title">Acerca de mi</h3>
          <p class="description-content">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
            eiusmod tempor incididunt ut labore et dolore magna aliqua.
          </p>
        </div>
      </div>
      <div class="account-kpis">
        <div class="kpi">
          <span class="title">Trueques</span>
          <div class="number">45</div>
        </div>

        <div class="kpi">
          <span class="title">Solicitudes</span>
          <div class="number">10</div>
        </div>

        <div class="kpi">
          <span class="title">Art√≠culos</span>
          <div class="number">24</div>
        </div>
      </div>
    </div>
    <div style="position: absolute; bottom: -4px">
      <img
        src="./../../../../assets/images/section-seperator.png"
        width="100%"
      />
    </div>
  </div>

  <div class="requests-container">
    <div class="request-wrapper">
      <div class="header-container">
        <div class="header">
          <h2 class="title">Bandeja de solicitudes</h2>
          <img
            src="../../../assets/svg/line-separator-start-yellow.svg"
            alt=""
          />
        </div>
        <app-button value="Ver historial" subtitle=""></app-button>
      </div>

      <div class="table-container">
        @for (item of requestList; track $index) {
        <div class="row">
          <div class="user">
            <span>{{ item.username }}</span>
          </div>

          <div class="exchange">
            <span
              >{{ item.exchangeFrom.name }} üëâüèª {{ item.exchangeTo.name }}</span
            >
          </div>

          <div class="date">
            <span>{{ item.createdAt | date : "dd/MM/yyyy" }}</span>
          </div>

          <div class="actions">
            <div
              mat-elevation-z4
              class="button"
              [ngClass]="{
                'button--check': item.status === 'check',
                'button--checked': item.status === 'checked'
              }"
              matRipple
            >
              {{
                item.status === "check"
                  ? "Revisar"
                  : item.status === "checked"
                  ? "Revisado"
                  : ""
              }}
            </div>
          </div>
        </div>
        }
      </div>
    </div>
  </div>

  <div class="items-container">
    <div style="position: absolute; top: 0px; left: 0px">
      <img
        src="./../../../../assets/images/section-seperator-2.png"
        width="100%"
      />
    </div>
    <div class="bg-elements"></div>
    <div class="header">
      <div class="header-container">
        <div class="header">
          <h2 class="title">MIS ARTICULOS</h2>
          <img src="../../../assets/svg/line-separator-start.svg" alt="" />
        </div>
        <app-button
          value="Crear nuevo"
          subtitle=""
          [routerLink]="['/create-item']"
        ></app-button>
      </div>
      <div class="items-container">
        @for (item of (itemList | async) ; track $index) {
        <app-item-card
          [images]="item.images"
          [description]="item.description"
          [title]="item.name"
          [routerLink]="['/home/item-detail', item.id]"
        ></app-item-card>
        }
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
